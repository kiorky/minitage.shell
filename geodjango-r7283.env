#!/usr/bin/env bash
WANTED_PYTHON_PACKAGES="geodjango-r7283 simplejson-1.0.1 psycopg2-2.0.6 lxml-2.0beta1 elementtree-1.2.7_20070827_preview"
WANTED_SYSTEM_LIBRARIES="geos-3.0 gdal-1.5 postgis-1.2-py2.5 postgresql-8.2-py2.5 proj-4.5 python-2.5 "
cwd="$(pwd)"
if [[ -d "$cwd/../../django" ]];then
        minitage_dir="$cwd/../../"
        python="$minitage_dir/dependencies/python-2.5/part/bin/python"
        export PATH="$minitage_dir/dependencies/python-2.5/part/bin:$PATH"
        #minitage v3
        for pypath in $WANTED_PYTHON_PACKAGES;do
                PYTHONPATH="$PYTHONPATH:$minitage_dir/eggs/$pypath/site-packages-2.5"
        done
        for lib in $WANTED_SYSTEM_LIBRARIES;do
                LD_LIBRARY_PATH="$LD_LIBRARY_PATH:$minitage_dir/dependencies/$lib/part/lib"
        done
        export PYTHON="$python" LD_LIBRARY_PATH="$LD_LIBRARY_PATH" PYTHONPATH="$PYTHONPATH"
        alias python="$PYTHON"
        alias python-2.5="$PYTHON"
        alias python2.5="$PYTHON"
        alias compile-messages="$PYTHON $minitage_dir/eggs/geodjango-r7283/site-packages-2.5/django/bin/compile-messages.py"
        alias daily-cleanup="$PYTHON $minitage_dir/eggs/geodjango-r7283/site-packages-2.5/django/bin/daily_cleanup.py"
        alias django-admin="$PYTHON $minitage_dir/eggs/geodjango-r7283/site-packages-2.5/django/bin/django-admin.py"
        alias make-messages="$PYTHON $minitage_dir/eggs/geodjango-r7283/site-packages-2.5/django/bin/make-messages.py"
        alias unique-messages="$PYTHON $minitage_dir/eggs/geodjango-r7283/site-packages-2.5/django/bin/unique-messages.py"
        if [[ $PS1 != *minitage* ]];then
                export PS1="(minitage) $PS1"
        fi
else
        echo "You are not in the project top level dir"
fi

